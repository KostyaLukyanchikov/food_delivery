<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тестовое задание от Social Systems</title>
    <link rel="stylesheet" href="https://stackedit.io/style.css"/>
</head>

<body class="stackedit">
<div class="stackedit__html">

    <h2>Описание</h2>
    Тестовое задание представляет собой разработку небольшого урезанного веб-приложения для заказа еды (по типу Яндекс
    Еды / Delivery Club).
    <br>Ниже будут описаны апи запросы для реализации. Пути и методы на ваше усмотрение.
    <br>Примерное время выполнения задания составляет 2-4 ч.
    <p>Требования:
    <ul>
        <li>Реализовать приложение на Django 4.0+ с использованием DRF.</li>
        <li>Для модели пользователя сделать кастомный <strong>AbstractUser</strong> от джанги.
            Новая модель пользователя должена использоваться фреймворком по-умолчанию.
        </li>
        <li>Если пользователь не авторизован - все запросы выдают 403</li>
        <li>Аутентификация через сессию джанги. Прикручивать JWT токены и тд не нужно. Регистрацию, логин и тд делать не
            нужно, только запросы из задания.
        </li>
        <li>Итоговый проект скинуть в архиве с файлами проекта и requirements пакетов для установки.</li>
    </ul>

    <p>Плюсом будет:
    <ul>
        <li>Предусмотреть откат результатов запроса при непредвиенных ошибках (500)</li>
        <li>Покрыть код тестами на основе TestCase-ов из rest_framework.test</li>
        <li>Добавить конфигурацию докера с docker-compose для запуска приложения в докере</li>
    </ul>


    <h2>1. Просмотр меню</h2>
    Получение списка меню. Блюда сгруппированы по ресторанам.
    <br>Должна быть возможность <strong>отфильтровать блюда по названию и/или id ресторана</strong> через параметры
    запроса
    <h4>ОТВЕТ</h4>
    <pre><code>[
    {
        "id": 1, # ID ресторана
        "name": "Бургерная",
        "dishes": [
            {
                "id": 1, # ID Блюда
                "name": "Грибной",
                "price": 350.0
            },
            ...
        ]
    },
    {
        "id": 2,
        "name": "Итальянская кухня",
        "dishes": [
            {
                "id": 3,
                "name": "Пицца Маргарита",
                "price": 450.0
            },
            ...
        ]
    }
]</code></pre>

    <h2>2. Добавление блюда в корзину</h2>
    <h4>ЗАПРОС</h4>
    <pre><code>{
    "dish_id": 1, # ID блюда
    "quantity": 2 # Кол-во позиций на добавление
}</code></pre>
    <h4>ОТВЕТ - 200</h4>

    <h2>3. Удаление блюда из корзины</h2>
    <h4>ЗАПРОС</h4>
    <pre><code>{
    "dish_id": 1, # ID блюда
    "quantity": 2 # Кол-во позиций на удаление
}</code></pre>
    <h4>ОТВЕТ - 200</h4>

    <h2>4. Просмотр корзины</h2>
    <h4>ОТВЕТ</h4>
    <pre><code>{
    "total_price": 1200.0, # общая стоимость корзины
    "positions": [
        {
            "id": 1,
            "name": "Грибной",
            "quantity": 2,
            "price": 700.0 # суммарная стоимость за все позиции
        },
        {
            "id": 2,
            "name": "Веган",
            "quantity": 1,
            "price": 500.0
        },
        ...
    ]
}</code></pre>

    <h2>5. Оплата корзины</h2>
    Списывает с баланса пользователя стоимость корзины. Создает заказ с данными из корзины на момент оплаты.
    <h4>ОТВЕТ - 200</h4>

    <h2>6. Просмотр заказов</h2>
    Список заказов и их статистика. В списке last_orders должны отображаться <strong>не более 10 заказов</strong>
    <h4>ОТВЕТ</h4>
    <pre><code>{
    "total_count": 2, # кол-во заказов
    "total_sum": 1200.0, # общая сумма заказов,
    "last_orders": [ # список заказов в порядке убывания
        {
            "id": 2,
            "price": 1200.0,
            "time": 1658343930, # timestamp времени создания
            "positions": [
                {
                    "id": 1,
                    "name": "Грибной",
                    "price": 700.00,
                    "quantity": 2
                },
                {
                    "id": 2,
                    "name": "Веган",
                    "price": 500.00,
                    "quantity": 1
                }
            ]
        },
        {
            "id": 1,
            ...
        },
        ...
    ]
}</code></pre>

</div>
</body>

</html>